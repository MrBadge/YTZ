<!DOCTYPE html>
<html class="">

<head>
    <meta charset="UTF-8">
    <meta name="robots" content="noindex">
    <link rel="canonical" href="http://codepen.io/GreenSock/pen/zDwEk">


    <style class="cp-pen-styles">
    body {
        background-color: black;
        font-family: Signika Negative, Asap, sans-serif;
    }
    #container {
        height: 801px;
        overflow: visible;
        padding: 0;
        position: relative;
    }
    .box {
        background-color: #91e600;
        text-align: center;
        font-family: Asap, Avenir, Arial, sans-serif;
        width: 196px;
        height: 100px;
        line-height: 100px;
        color: black;
        position: absolute;
        top: 0;
        -webkit-border-radius: 10px;
        -moz-border-radius: 10px;
        border-radius: 10px;
    }
    .controls {
        background-color: #222;
        border: 1px solid #555;
        color: #bbb;
        font-size: 18px;
        margin: 20px 0;
    }
    .controls ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }
    .controls li {
        display: inline-block;
        padding: 8px 0 8px 10px;
        margin: 0;
    }
    .controls input {
        vertical-align: middle;
        cursor: pointer;
    }
    .controls .controlsTitle {
        border-right: 1px solid #555;
        border-bottom: none;
        padding-right: 10px;
    }
    </style>
    <style type="text/css"></style>
</head>

<body>
    <link href="http://fonts.googleapis.com/css?family=Asap:400,700" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Signika+Negative:300,400,700" rel="stylesheet" type="text/css">
    <div id="container" style="width: 981px; height: 601px;">
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 500px; left: 784px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 500px; left: 588px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 500px; left: 392px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 500px; left: 196px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 500px; left: 0px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 400px; left: 784px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 400px; left: 588px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 400px; left: 392px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 400px; left: 196px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 400px; left: 0px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 300px; left: 784px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 300px; left: 588px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 300px; left: 392px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 300px; left: 196px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 300px; left: 0px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 200px; left: 784px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 200px; left: 588px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 200px; left: 392px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 200px; left: 196px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 200px; left: 0px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 100px; left: 784px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 100px; left: 588px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 100px; left: 392px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 100px; left: 196px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 100px; left: 0px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 0px; left: 784px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 0px; left: 588px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 0px; left: 392px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 0px; left: 196px;"></div>
        <div style="position: absolute; border: 1px solid rgb(69, 69, 69); width: 195px; height: 99px; top: 0px; left: 0px;"></div>
        <div class="box" id="box1" style="line-height: 100px; height: 100px; width: 196px; z-index: 0; cursor: move; -webkit-user-select: none; -webkit-transform: translate3d(0px, 0px, 0px);">Drag and throw me</div>
        <div class="box" id="box2" style="left: 392px; background-color: red; line-height: 100px; height: 100px; width: 196px; z-index: 0; cursor: move; -webkit-user-select: none; -webkit-transform: translate3d(0px, 0px, 0px);">Drag and throw me too</div>
    </div>
    <div class="controls">
        <ul>
            <li class="controlsTitle">Options</li>
            <li>
                <label>
                    <input type="checkbox" name="snap" id="snap" value="1">Snap end position to grid</label>
            </li>
            <li>
                <label>
                    <input type="checkbox" name="liveSnap" id="liveSnap" value="1">Live snap</label>
            </li>
        </ul>
    </div>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

    <script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/1.14.2/TweenLite.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/1.14.2/utils/Draggable.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/1.14.2/plugins/CSSPlugin.min.js"></script>
    <script>
    var $snap = $('#snap'),
        $liveSnap = $('#liveSnap'),
        $container = $('#container'),
        gridWidth = 196,
        gridHeight = 100,
        gridRows = 6,
        gridColumns = 5,
        i, x, y;
    for (i = 0; i < gridRows * gridColumns; i++) {

        y = Math.floor(i / gridColumns) * gridHeight;
        x = i * gridWidth % (gridColumns * gridWidth);
        $('<div/>').css({
            position: 'absolute',
            border: '1px solid #454545',
            width: gridWidth - 1,
            height: gridHeight - 1,
            top: y,
            left: x
        }).prependTo($container);
    }
    TweenLite.set($container, {
        height: gridRows * gridHeight + 1,
        width: gridColumns * gridWidth + 1
    });
    TweenLite.set('.box', {
        width: gridWidth,
        height: gridHeight,
        lineHeight: gridHeight + 'px'
    });

    function update() {

        var snap = $snap.prop('checked'),
            liveSnap = $liveSnap.prop('checked');
        Draggable.create('.box', {
            bounds: $container,
            edgeResistance: 0.65,
            type: 'x,y',
            throwProps: true,
            liveSnap: liveSnap,
            snap: {
                x: function(endValue) {
                    return snap || liveSnap ? Math.round(endValue / gridWidth) * gridWidth : endValue;
                },
                y: function(endValue) {
                    return snap || liveSnap ? Math.round(endValue / gridHeight) * gridHeight : endValue;
                }
            }
        });
    }
    $snap.on('change', applySnap);
    $liveSnap.on('change', applySnap);

    function applySnap() {

        if ($snap.prop('checked') || $liveSnap.prop('checked')) {
            $('.box').each(function(index, element) {

                TweenLite.to(element, 0.5, {
                    x: Math.round(element._gsTransform.x / gridWidth) * gridWidth,
                    y: Math.round(element._gsTransform.y / gridHeight) * gridHeight,
                    delay: 0.1,
                    ease: Power2.easeInOut
                });
            });
        }
        update();
    }
    update(); //@ sourceURL=pen.js
    </script>
    <script src="http://codepen.io/assets/editor/live/css_live_reload_init.js"></script>
</body>

</html>
